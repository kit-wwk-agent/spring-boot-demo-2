openapi: 3.1.0
info:
  title: Pagination API Contract
  version: 1.0.0
  description: |
    API contract for list endpoint pagination.
    All list endpoints MUST follow this contract for consistency.

paths:
  /api/{resource}:
    get:
      summary: List resources with pagination
      description: |
        Generic contract for all paginated list endpoints.
        Replace {resource} with actual endpoint path.
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
      responses:
        '200':
          description: Paginated list of resources
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResponse'
        '400':
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalidPage:
                  summary: Negative page number
                  value:
                    error: "Validation failed"
                    message: "page: must be greater than or equal to 0"
                    status: 400
                    timestamp: "2026-02-26T10:30:00Z"
                invalidSize:
                  summary: Size exceeds maximum
                  value:
                    error: "Validation failed"
                    message: "size: must be less than or equal to 100"
                    status: 400
                    timestamp: "2026-02-26T10:30:00Z"
                nonNumeric:
                  summary: Non-numeric parameter
                  value:
                    error: "Type Mismatch Error"
                    message: "Parameter 'page' must be Integer, but got 'abc'"
                    status: 400
                    timestamp: "2026-02-26T10:30:00Z"

components:
  parameters:
    page:
      name: page
      in: query
      required: false
      description: Zero-indexed page number
      schema:
        type: integer
        minimum: 0
        default: 0
      examples:
        firstPage:
          value: 0
          summary: First page
        secondPage:
          value: 1
          summary: Second page

    size:
      name: size
      in: query
      required: false
      description: Number of items per page
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      examples:
        default:
          value: 20
          summary: Default page size
        small:
          value: 10
          summary: Small page
        max:
          value: 100
          summary: Maximum allowed

  schemas:
    PageResponse:
      type: object
      required:
        - content
        - totalElements
        - totalPages
        - number
        - size
      properties:
        content:
          type: array
          items:
            type: object
            description: Resource items (type varies by endpoint)
          description: Array of items for current page
        totalElements:
          type: integer
          format: int64
          minimum: 0
          description: Total number of records in dataset
          example: 50
        totalPages:
          type: integer
          format: int32
          minimum: 0
          description: Total number of pages (ceil(totalElements/size))
          example: 3
        number:
          type: integer
          format: int32
          minimum: 0
          description: Current page number (zero-indexed)
          example: 0
        size:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Requested page size
          example: 20
        first:
          type: boolean
          description: True if this is the first page
          example: true
        last:
          type: boolean
          description: True if this is the last page
          example: false
        empty:
          type: boolean
          description: True if content array is empty
          example: false
        numberOfElements:
          type: integer
          format: int32
          minimum: 0
          description: Actual number of items in content
          example: 20

    ErrorResponse:
      type: object
      required:
        - error
        - message
        - status
        - timestamp
      properties:
        error:
          type: string
          description: Error category
          example: "Validation failed"
        message:
          type: string
          description: Detailed error message
          example: "size: must be less than or equal to 100"
        status:
          type: integer
          format: int32
          description: HTTP status code
          example: 400
        timestamp:
          type: string
          format: date-time
          description: Time when error occurred
          example: "2026-02-26T10:30:00Z"
